<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FloatChat - Ocean Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    body { margin:0; font-family: sans-serif; background: #001c36; color: white; }
    #map { height: 90vh; width: 100%; }
    h1 { text-align: center; padding: 20px; color: #00cfff; }
    .legend { background: rgba(0,0,0,0.6); padding: 10px; line-height: 1.5em; }
    .legend span { display: inline-block; width: 20px; height: 20px; margin-right: 5px; vertical-align: middle; }
  </style>
</head>
<body>

<h1>FloatChat - ARGO Ocean Data Map</h1>
<div id="map"></div>

<script>
  // Initialize the map centered over Indian Ocean
  var map = L.map('map').setView([0, 60], 3);

  // Add ocean tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data © OpenStreetMap contributors'
  }).addTo(map);

  // Sample float data
  var floats = [
    {lat: -10, lon: 70, temp: 28, salinity: 35, id: "F001", trajectory: [[-12,69],[-11,69.5],[-10,70]]},
    {lat: -5, lon: 65, temp: 26, salinity: 34, id: "F002", trajectory: [[-7,64],[-6,64.5],[-5,65]]},
    {lat: 0, lon: 60, temp: 27, salinity: 36, id: "F003", trajectory: [[-1,59],[-0.5,59.5],[0,60]]}
  ];

  // Color based on temperature
  function getColor(temp){
    if(temp >= 28) return 'red';
    if(temp >= 26) return 'orange';
    return 'blue';
  }

  // Add floats and trajectories
  floats.forEach(function(f){
    // Marker
    L.circleMarker([f.lat, f.lon], {
      radius: 8,
      color: getColor(f.temp),
      fillOpacity: 0.7
    }).bindPopup(`
      <b>Float ID:</b> ${f.id}<br>
      <b>Temperature:</b> ${f.temp} °C<br>
      <b>Salinity:</b> ${f.salinity} PSU
    `).addTo(map);

    // Trajectory line
    L.polyline(f.trajectory, {color: 'cyan', weight: 2, dashArray: '5,5'}).addTo(map);
  });

  // Legend
  var legend = L.control({position: 'bottomright'});
  legend.onAdd = function () {
    var div = L.DomUtil.create('div', 'legend');
    div.innerHTML += "<b>Temperature (°C)</b><br>";
    div.innerHTML += '<span style="background:red"></span> 28+<br>';
    div.innerHTML += '<span style="background:orange"></span> 26-28<br>';
    div.innerHTML += '<span style="background:blue"></span> <26<br>';
    return div;
  };
  legend.addTo(map);

</script>

</body>
</html>

